(()=>{"use strict";const e=window.wp.blocks,n=window.wp.i18n,i=window.wp.blockEditor,o=window.wp.components,s=window.ReactJSXRuntime,l=JSON.parse('{"UU":"sync/cookie-banner"}');(0,e.registerBlockType)(l.UU,{edit:function({attributes:e,setAttributes:l,context:t}){const{bannerTitle:a,bannerDescription:c,privacyPolicyLink:r,privacyPolicyText:d,termsLink:y,termsText:h,acceptAllText:_,rejectAllText:p,customizeText:x,savePreferencesText:C,necessaryCookiesTitle:b,necessaryCookiesDescription:g,functionalCookiesTitle:w,functionalCookiesDescription:m,analyticalCookiesTitle:k,analyticalCookiesDescription:u,advertisingCookiesTitle:j,advertisingCookiesDescription:v,trackingCookiesTitle:T,trackingCookiesDescription:P,bannerPosition:N,floatingButtonPosition:f,cookieExpiration:B,primaryColor:S,textColor:D,backgroundColor:O,showOnlyInSiteEditor:L,privacyPolicyVersion:A,termsVersion:R,checkVersionChanges:E,enabledCookieTypes:F,showBanner:z,showDoNotSellLink:V,doNotSellLink:I,doNotSellText:U,consentModel:G}=e,M=(0,i.useBlockProps)(),{postType:$}=t,W=L&&!("wp_template"===$||"wp_template_part"===$),q=[{label:(0,n.__)("Bottom","wisesync"),value:"bottom"},{label:(0,n.__)("Top","wisesync"),value:"top"},{label:(0,n.__)("Center","wisesync"),value:"center"}],J=[{label:(0,n.__)("Bottom Right","wisesync"),value:"bottom-right"},{label:(0,n.__)("Bottom Left","wisesync"),value:"bottom-left"},{label:(0,n.__)("Top Right","wisesync"),value:"top-right"},{label:(0,n.__)("Top Left","wisesync"),value:"top-left"}],X=[{label:(0,n.__)("Opt-in (Explicit Consent)","wisesync"),value:"opt-in"},{label:(0,n.__)("Opt-out (Implied Consent)","wisesync"),value:"opt-out"},{label:(0,n.__)("Notice Only","wisesync"),value:"notice-only"},{label:(0,n.__)("Deemed Consent","wisesync"),value:"deemed-consent"},{label:(0,n.__)("Implied Consent","wisesync"),value:"implied-consent"}],H=(e,n)=>{l({enabledCookieTypes:{...F,[e]:n}})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.InspectorControls,{children:(0,s.jsx)(o.TabPanel,{className:"cookie-banner-tabs",tabs:[{name:"visibility",title:(0,n.__)("Visibility","wisesync"),className:"visibility-tab"},{name:"general",title:(0,n.__)("General","wisesync")},{name:"cookieCategories",title:(0,n.__)("Cookie Categories","wisesync")},{name:"appearance",title:(0,n.__)("Appearance","wisesync")},{name:"advanced",title:(0,n.__)("Advanced","wisesync")},{name:"restrictions",title:(0,n.__)("Restrictions","wisesync")},{name:"compliance",title:(0,n.__)("Compliance","wisesync")}],children:e=>"visibility"===e.name?(0,s.jsxs)(o.PanelBody,{title:(0,n.__)("Banner Visibility","wisesync"),initialOpen:!0,children:[(0,s.jsx)(o.ToggleControl,{label:(0,n.__)("Show Banner","wisesync"),checked:z,onChange:e=>l({showBanner:e}),help:(0,n.__)("Toggle to show or minimize the banner. When hidden, it will be minimized to the bottom of the page.","wisesync")}),(0,s.jsx)("p",{className:"banner-visibility-note",children:(0,n.__)("Note: This setting only affects the editor preview and frontend display. The banner will still be functional when minimized, and users can access it via the floating button.","wisesync")})]}):"general"===e.name?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.PanelBody,{title:(0,n.__)("Banner Content","wisesync"),initialOpen:!0,children:[(0,s.jsx)(o.TextControl,{label:(0,n.__)("Banner Title","wisesync"),value:a,onChange:e=>l({bannerTitle:e})}),(0,s.jsx)(o.TextControl,{label:(0,n.__)("Banner Description","wisesync"),value:c,onChange:e=>l({bannerDescription:e}),multiline:"p"}),(0,s.jsx)(o.TextControl,{label:(0,n.__)("Privacy Policy Link","wisesync"),value:r,onChange:e=>l({privacyPolicyLink:e}),help:(0,n.__)("Enter the URL to your Privacy Policy page","wisesync")}),(0,s.jsx)(o.TextControl,{label:(0,n.__)("Privacy Policy Text","wisesync"),value:d,onChange:e=>l({privacyPolicyText:e})}),(0,s.jsx)(o.TextControl,{label:(0,n.__)("Privacy Policy Version","wisesync"),value:A,onChange:e=>l({privacyPolicyVersion:e}),help:(0,n.__)("Optional: Set a version identifier (like a date) to track policy changes","wisesync")}),(0,s.jsx)(o.TextControl,{label:(0,n.__)("Terms Link","wisesync"),value:y,onChange:e=>l({termsLink:e}),help:(0,n.__)("Enter the URL to your Terms of Service page","wisesync")}),(0,s.jsx)(o.TextControl,{label:(0,n.__)("Terms Text","wisesync"),value:h,onChange:e=>l({termsText:e})}),(0,s.jsx)(o.TextControl,{label:(0,n.__)("Terms Version","wisesync"),value:R,onChange:e=>l({termsVersion:e}),help:(0,n.__)("Optional: Set a version identifier (like a date) to track terms changes","wisesync")}),(0,s.jsx)(o.ToggleControl,{label:(0,n.__)("Check for Version Changes","wisesync"),checked:E,onChange:e=>l({checkVersionChanges:e}),help:(0,n.__)("When enabled, users will be asked to re-consent when your privacy policy or terms change","wisesync")})]}),(0,s.jsxs)(o.PanelBody,{title:(0,n.__)("Button Labels","wisesync"),initialOpen:!1,children:[(0,s.jsx)(o.TextControl,{label:(0,n.__)("Accept All Text","wisesync"),value:_,onChange:e=>l({acceptAllText:e})}),(0,s.jsx)(o.TextControl,{label:(0,n.__)("Reject All Text","wisesync"),value:p,onChange:e=>l({rejectAllText:e})}),(0,s.jsx)(o.TextControl,{label:(0,n.__)("Customize Text","wisesync"),value:x,onChange:e=>l({customizeText:e})}),(0,s.jsx)(o.TextControl,{label:(0,n.__)("Save Preferences Text","wisesync"),value:C,onChange:e=>l({savePreferencesText:e})})]})]}):"cookieCategories"===e.name?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.PanelBody,{title:(0,n.__)("Cookie Types Configuration","wisesync"),initialOpen:!0,children:[(0,s.jsx)("p",{className:"cookie-category-help",children:(0,n.__)("Enable or disable different cookie categories. Note that necessary cookies cannot be disabled.","wisesync")}),(0,s.jsx)(o.ToggleControl,{label:(0,n.__)("Functional Cookies","wisesync"),checked:F.functional,onChange:e=>H("functional",e)}),(0,s.jsx)(o.ToggleControl,{label:(0,n.__)("Analytical Cookies","wisesync"),checked:F.analytical,onChange:e=>H("analytical",e)}),(0,s.jsx)(o.ToggleControl,{label:(0,n.__)("Advertising Cookies","wisesync"),checked:F.advertising,onChange:e=>H("advertising",e)}),(0,s.jsx)(o.ToggleControl,{label:(0,n.__)("Tracking Cookies","wisesync"),checked:F.tracking,onChange:e=>H("tracking",e)})]}),(0,s.jsxs)(o.PanelBody,{title:(0,n.__)("Necessary Cookies","wisesync"),initialOpen:!1,children:[(0,s.jsx)(o.TextControl,{label:(0,n.__)("Title","wisesync"),value:b,onChange:e=>l({necessaryCookiesTitle:e})}),(0,s.jsx)(o.TextControl,{label:(0,n.__)("Description","wisesync"),value:g,onChange:e=>l({necessaryCookiesDescription:e}),multiline:"p"}),(0,s.jsx)("p",{className:"cookie-category-note",children:(0,n.__)("Necessary cookies are always enabled and cannot be rejected.","wisesync")})]}),F.functional&&(0,s.jsxs)(o.PanelBody,{title:(0,n.__)("Functional Cookies","wisesync"),initialOpen:!1,children:[(0,s.jsx)(o.TextControl,{label:(0,n.__)("Title","wisesync"),value:w,onChange:e=>l({functionalCookiesTitle:e})}),(0,s.jsx)(o.TextControl,{label:(0,n.__)("Description","wisesync"),value:m,onChange:e=>l({functionalCookiesDescription:e}),multiline:"p"})]}),F.analytical&&(0,s.jsxs)(o.PanelBody,{title:(0,n.__)("Analytical Cookies","wisesync"),initialOpen:!1,children:[(0,s.jsx)(o.TextControl,{label:(0,n.__)("Title","wisesync"),value:k,onChange:e=>l({analyticalCookiesTitle:e})}),(0,s.jsx)(o.TextControl,{label:(0,n.__)("Description","wisesync"),value:u,onChange:e=>l({analyticalCookiesDescription:e}),multiline:"p"})]}),F.advertising&&(0,s.jsxs)(o.PanelBody,{title:(0,n.__)("Advertising Cookies","wisesync"),initialOpen:!1,children:[(0,s.jsx)(o.TextControl,{label:(0,n.__)("Title","wisesync"),value:j,onChange:e=>l({advertisingCookiesTitle:e})}),(0,s.jsx)(o.TextControl,{label:(0,n.__)("Description","wisesync"),value:v,onChange:e=>l({advertisingCookiesDescription:e}),multiline:"p"})]}),F.tracking&&(0,s.jsxs)(o.PanelBody,{title:(0,n.__)("Tracking Cookies","wisesync"),initialOpen:!1,children:[(0,s.jsx)(o.TextControl,{label:(0,n.__)("Title","wisesync"),value:T,onChange:e=>l({trackingCookiesTitle:e})}),(0,s.jsx)(o.TextControl,{label:(0,n.__)("Description","wisesync"),value:P,onChange:e=>l({trackingCookiesDescription:e}),multiline:"p"})]})]}):"appearance"===e.name?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.PanelBody,{title:(0,n.__)("Layout Settings","wisesync"),initialOpen:!0,children:[(0,s.jsx)(o.SelectControl,{label:(0,n.__)("Banner Position","wisesync"),value:N,options:q,onChange:e=>l({bannerPosition:e})}),(0,s.jsx)(o.SelectControl,{label:(0,n.__)("Floating Button Position","wisesync"),value:f,options:J,onChange:e=>l({floatingButtonPosition:e})})]}),(0,s.jsxs)(o.PanelBody,{title:(0,n.__)("Colors","wisesync"),initialOpen:!1,children:[(0,s.jsxs)("div",{className:"cookie-banner-color-setting",children:[(0,s.jsx)("p",{children:(0,n.__)("Primary Color","wisesync")}),(0,s.jsx)(o.ColorPicker,{color:S,onChangeComplete:e=>l({primaryColor:e.hex}),disableAlpha:!0})]}),(0,s.jsxs)("div",{className:"cookie-banner-color-setting",children:[(0,s.jsx)("p",{children:(0,n.__)("Text Color","wisesync")}),(0,s.jsx)(o.ColorPicker,{color:D,onChangeComplete:e=>l({textColor:e.hex}),disableAlpha:!0})]}),(0,s.jsxs)("div",{className:"cookie-banner-color-setting",children:[(0,s.jsx)("p",{children:(0,n.__)("Background Color","wisesync")}),(0,s.jsx)(o.ColorPicker,{color:O,onChangeComplete:e=>l({backgroundColor:e.hex}),disableAlpha:!0})]})]})]}):"advanced"===e.name?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(o.PanelBody,{title:(0,n.__)("Cookie Settings","wisesync"),initialOpen:!0,children:[(0,s.jsx)(o.RangeControl,{label:(0,n.__)("Cookie Expiration (days)","wisesync"),value:B,onChange:e=>l({cookieExpiration:e}),min:1,max:730}),(0,s.jsx)(o.SelectControl,{label:(0,n.__)("Consent Model","wisesync"),value:G,options:X,onChange:e=>l({consentModel:e}),help:(0,n.__)("Select the consent model to use based on your region's legal requirements. This will be overridden by GeoIP detection if enabled.","wisesync")}),(0,s.jsx)("p",{className:"cookie-info-notice",children:(0,n.__)("Note: The cookie expiration setting may be automatically adjusted based on the visitor's location to comply with local regulations.","wisesync")})]})}):"restrictions"===e.name?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(o.PanelBody,{title:(0,n.__)("Block Usage Restrictions","wisesync"),initialOpen:!0,children:(0,s.jsx)(o.ToggleControl,{label:(0,n.__)("Show Only in Site Editor","wisesync"),checked:L,onChange:e=>l({showOnlyInSiteEditor:e}),help:(0,n.__)("When enabled, this block will only be visible when added to a template in the Site Editor, not in individual posts or pages.","wisesync")})})}):"compliance"===e.name?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(o.PanelBody,{title:(0,n.__)("Regional Compliance","wisesync"),initialOpen:!0,children:[(0,s.jsx)("p",{children:(0,n.__)("The banner will automatically adjust to comply with privacy regulations based on the visitor's location.","wisesync")}),(0,s.jsx)(o.ToggleControl,{label:(0,n.__)("Show Do Not Sell Link","wisesync"),checked:V,onChange:e=>l({showDoNotSellLink:e}),help:(0,n.__)('Display a "Do Not Sell or Share My Personal Information" link (required for CCPA/CPRA compliance).',"wisesync")}),V&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.TextControl,{label:(0,n.__)("Do Not Sell Link","wisesync"),value:I,onChange:e=>l({doNotSellLink:e}),help:(0,n.__)("URL to your Do Not Sell or Share My Personal Information page","wisesync")}),(0,s.jsx)(o.TextControl,{label:(0,n.__)("Do Not Sell Text","wisesync"),value:U,onChange:e=>l({doNotSellText:e})})]}),(0,s.jsx)("p",{className:"compliance-note",children:(0,n.__)("Note: GeoIP detection will override some of these settings to ensure compliance with local laws.","wisesync")})]})}):void 0})}),(0,s.jsx)("div",{...M,className:`${M.className||""} ${z?"":"minimized-banner"}`,children:W?(0,s.jsx)(o.Notice,{status:"warning",isDismissible:!1,className:"cookie-banner-notice-restriction",children:(0,n.__)("This Cookie Banner block is configured to only be shown when used in the Site Editor. It will not be visible on individual posts or pages.","wisesync")}):(0,s.jsxs)(o.Placeholder,{icon:"privacy",label:(0,n.__)("Cookie Consent Banner","wisesync"),instructions:(0,n.__)("Configure the cookie consent banner settings in the sidebar. This block will display a GDPR compliant cookie consent banner on the frontend of your site.","wisesync"),children:[(0,s.jsxs)("div",{className:"cookie-banner-preview",children:[(0,s.jsxs)("div",{className:"cookie-banner-mock "+(z?"":"minimized"),style:{backgroundColor:O,color:D,borderTop:`3px solid ${S}`},children:[z&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"cookie-banner-mock-content",children:[(0,s.jsx)("h4",{style:{color:D},children:a}),(0,s.jsx)("p",{children:c}),(0,s.jsxs)("div",{className:"cookie-banner-mock-links",children:[r&&(0,s.jsx)("span",{className:"privacy-link",children:(0,s.jsx)("a",{href:"#",style:{color:S},children:d})}),r&&y&&(0,s.jsx)("span",{className:"link-separator",children:" | "}),y&&(0,s.jsx)("span",{className:"terms-link",children:(0,s.jsx)("a",{href:"#",style:{color:S},children:h})}),(r||y)&&V&&(0,s.jsx)("span",{className:"link-separator",children:" | "}),V&&(0,s.jsx)("span",{className:"do-not-sell-link",children:(0,s.jsx)("a",{href:"#",style:{color:S},children:U})})]})]}),(0,s.jsxs)("div",{className:"cookie-banner-mock-buttons",children:[(0,s.jsx)("button",{className:"cookie-action-button secondary",style:{borderColor:S,color:S},children:x}),(0,s.jsx)("button",{className:"cookie-action-button secondary",style:{borderColor:S,color:S},children:p}),(0,s.jsx)("button",{className:"cookie-action-button primary",style:{backgroundColor:S,borderColor:S},children:_})]})]}),!z&&(0,s.jsx)("div",{className:"minimized-banner-indicator",style:{backgroundColor:S},children:(0,s.jsx)("span",{children:(0,n.__)("Banner minimized. Toggle visibility in block settings.","wisesync")})})]}),(0,s.jsx)("div",{className:`floating-button-mock ${f}`,style:{backgroundColor:S},children:(0,s.jsx)("span",{className:"dashicons dashicons-privacy"})})]}),(0,s.jsx)("p",{className:"cookie-banner-notice",children:z?(0,n.__)("This block has a preview in the editor but will adapt to the visitor's location on the frontend.","wisesync"):(0,n.__)("Banner is minimized. Users can still access settings via the floating button.","wisesync")}),(0,s.jsxs)("p",{children:[(0,n.__)("Learn more about ","wisesync"),(0,s.jsx)(o.ExternalLink,{href:"https://gdpr.eu/cookies/",children:(0,n.__)("GDPR Cookie Compliance","wisesync")})]})]})})]})}})})();